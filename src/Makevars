SOURCES = $(wildcard *.cpp vina/main/*.cpp vina/lib/*.cpp)
OBJECTS = $(SOURCES:.cpp=.o)
PKG_CXXFLAGS=-I boost_deps/boost_build/include -I ./vina/lib
PKG_LIBS = -L./boost_deps/boost_build/lib $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) -lvinaboost_system -lvinaboost_serialization -lvinaboost_thread -lvinaboost_filesystem -lvinaboost_program_options


final: $(SHLIB)
	@if ! test -z `command -v install_name_tool`;	then\
		echo "*** Linking libs for MAC OSX....";\
		install_name_tool -change "libvinaboost_system.dylib" "@loader_path/../boostlibs//libvinaboost_system.dylib" $(SHLIB);\
		install_name_tool -change "libvinaboost_filesystem.dylib" "@loader_path/../boostlibs//libvinaboost_filesystem.dylib" $(SHLIB);\
		install_name_tool -change "libvinaboost_serialization.dylib" "@loader_path/../boostlibs//libvinaboost_serialization.dylib" $(SHLIB);\
		install_name_tool -change "libvinaboost_thread.dylib" "@loader_path/../boostlibs//libvinaboost_thread.dylib" $(SHLIB);\
		install_name_tool -change "libvinaboost_program_options.dylib" "@loader_path/../boostlibs//libvinaboost_program_options.dylib" $(SHLIB);\
		install_name_tool -change "libvinaboost_date_time.dylib" "@loader_path/../boostlibs//libvinaboost_date_time.dylib" $(SHLIB);\
	fi
